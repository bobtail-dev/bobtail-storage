// Generated by CoffeeScript 1.9.1
(function() {
  var $, TEST_ARRAY, TEST_OBJECT, _, rxStorage, storages, testKey, testPrefix;

  $ = window.$, _ = window._, rxStorage = window.rxStorage;

  testPrefix = "reactive__storage__test__";

  testKey = function(k) {
    return "" + testPrefix + k;
  };

  storages = ["localStorage", "sessionStorage"];

  TEST_OBJECT = {
    name: "name",
    array: [1, 2, 3],
    object: {
      a: 'a',
      b: 'b'
    }
  };

  TEST_ARRAY = [
    1, 2, [
      3, 4, {
        name: 'name'
      }
    ]
  ];

  storages.forEach(function(storage) {
    var curRxStorage, windowStorage;
    curRxStorage = rxStorage[storage];
    windowStorage = window[storage];
    windowStorage.clear();
    QUnit.test(storage + ".addString", function(assert) {
      var k;
      k = testKey("addString");
      curRxStorage.setItem(k, "value");
      assert.equal(curRxStorage.getItem(k), "value");
      return assert.equal(windowStorage[k], "value");
    });
    QUnit.test(storage + ".addJSON", function(assert) {
      var k;
      k = testKey("addJSON");
      curRxStorage.setItem(k, TEST_OBJECT);
      assert.propEqual(curRxStorage.getItem(k), TEST_OBJECT);
      return assert.equal(windowStorage.getItem("" + rxStorage.__jsonPrefix + k), JSON.stringify(TEST_OBJECT));
    });
    QUnit.test(storage + ".clear", function(assert) {
      var k1, k2;
      k1 = testKey("clearString");
      k2 = testKey("clearJSON");
      curRxStorage.setItem(k1, "str");
      curRxStorage.setItem(k2, TEST_OBJECT);
      curRxStorage.clear();
      assert.strictEqual(curRxStorage.getItem(k1), void 0);
      assert.strictEqual(curRxStorage.getItem(k2), void 0);
      return assert.propEqual(windowStorage, {});
    });
    QUnit.test(storage + ".removeString", function(assert) {
      var k;
      k = testKey("clearString");
      curRxStorage.setItem(k, "str");
      curRxStorage.removeItem(k);
      assert.strictEqual(curRxStorage.getItem(k), void 0);
      return assert.propEqual(windowStorage, {});
    });
    QUnit.test(storage + ".removeJSON", function(assert) {
      var k;
      k = testKey("clearString");
      curRxStorage.setItem(k, TEST_OBJECT);
      curRxStorage.removeItem(k);
      assert.strictEqual(curRxStorage.getItem(k), void 0);
      return assert.propEqual(windowStorage, {});
    });
    return QUnit.test(storage + ".getMissingKey", function(assert) {
      return assert.strictEqual(curRxStorage.getItem("badkey"), void 0);
    });
  });

}).call(this);

//# sourceMappingURL=tests.js.map
